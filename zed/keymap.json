[
  {
    "context": "Editor && vim_mode == normal && !menu",
    "bindings": {
      // --- File / UI ---
      ", f": "file_finder::Toggle", // Fixed: Added space
      ", p": "command_palette::Toggle",
      ", n": "workspace::NewFile",
      ", a": "editor::SelectAll",

      // --- Save ---
      "ctrl-s": "workspace::Save",

      // --- Search ---
      // Changed to 'workspace::NewSearch' which is the standard "Find in Project"
      ", s": "workspace::NewSearch",

      // --- Terminal ---
      // ", t": "terminal_panel::ToggleFocus",
      "ctrl-t": "terminal_panel::ToggleFocus",

      // --- LSP ---
      ", h": "editor::ToggleInlayHints",
      ", c d": "editor::GoToDefinition",
      ", c r": "editor::FindAllReferences",
      ", c a": "editor::ToggleCodeActions",
      ", c h": "editor::Hover",
      ", c n": "editor::Rename",

      // Vim-standard hover (Shift+K is default in Vim, ensuring it maps to Zed hover)
      // "shift-k": "editor::Hover",

      // --- Diagnostics ---
      ", c l": "diagnostics::Deploy",

      // --- Outline ---
      ", o": "outline::Toggle",

      // --- Pane Navigation ---
      "ctrl-h": "workspace::ActivatePaneLeft",
      "ctrl-j": "workspace::ActivatePaneDown",
      "ctrl-k": "workspace::ActivatePaneUp",
      "ctrl-l": "workspace::ActivatePaneRight",

      // --- Move Lines Up And Down
      "alt-j": "editor::MoveLineDown",
      "alt-k": "editor::MoveLineUp",

      // --- Pane Management ---
      // 'SplitDown' = Horizontal Split (one top, one bottom)
      ", w s": "pane::SplitDown",
      // 'SplitRight' = Vertical Split (side by side)
      ", w v": "pane::SplitRight",

      // --- Explorer ---
      ", e": "project_panel::ToggleFocus",

      // --- Buffers ---
      ", b": "pane::ActivateNextItem",
      ", d": "pane::CloseActiveItem",

      // --- Comment ---
      "ctrl-/": "editor::ToggleComments",

      // --- Command Palette Helper ---
      ", k": "command_palette::Toggle",
    },
  },
  // Temporary to close the explorer when we are init, either the q keybind or our , e
  {
    "context": "Workspace && !Editor && !Terminal",
    "bindings": {
      "q": "workspace::ToggleLeftDock",
      ", e": "workspace::ToggleLeftDock",
    },
  },
  {
    "context": "Editor && vim_mode == visual",
    "bindings": {
      "ctrl-/": "editor::ToggleComments",
      // Allows pasting system clipboard content easily in visual mode
      "p": "editor::Paste",
    },
  },

  {
    "context": "Editor && vim_mode == insert",
    "bindings": {
      "ctrl-s": "workspace::Save",
      // Rapid 'jj' to exit insert mode
      "j j": "vim::SwitchToNormalMode",
    },
  },
  {
    "context": "Terminal",
    "use_key_equivalents": true,
    "bindings": { "ctrl-t": "terminal_panel::Toggle" },
  },
  {
    "context": "Editor && vim_mode == insert && showing_completions",
    "bindings": {
      "ctrl-j": "editor::ContextMenuNext",
      "ctrl-k": "editor::ContextMenuPrevious",
    },
  },
  {
    "context": "picker || menu",
    "bindings": {
      "ctrl-j": "menu::SelectNext",
      "ctrl-k": "menu::SelectPrevious",
    },
  },
  // Try this out, potentially if it works everyhwere then we can remove the above
  {
    "context": "Workspace || Editor || picker || menu",
    "bindings": {
      "ctrl-j": "menu::SelectNext",
      "ctrl-k": "menu::SelectPrevious",
    },
  },

  // {
  //   "context": "Terminal",
  //   "bindings": {
  //     "ctrl-t": "terminal_panel::ToggleFocus",
  //     // Allow window navigation even when terminal is focused
  //     "ctrl-h": "workspace::ActivatePaneLeft",
  //     "ctrl-j": "workspace::ActivatePaneDown",
  //     "ctrl-k": "workspace::ActivatePaneUp",
  //     "ctrl-l": "workspace::ActivatePaneRight",
  //   },
  // },

  {
    "bindings": {
      ", b": "tab_switcher::ToggleAll",
      "ctrl-x": "tab_switcher::CloseSelectedItem",
    },
  },
  // Allows us to move around in insert mode as we have in our neovim config
  {
    "context": "Editor && vim_mode == insert && !menu",
    "bindings": {
      "ctrl-h": "editor::MoveLeft",
      "ctrl-l": "editor::MoveRight",
      "ctrl-j": "editor::MoveDown",
      "ctrl-k": "editor::MoveUp",
    },
  },

  {
    "context": "Editor && vim_mode == insert && !menu",
    "bindings": {
      "ctrl-e": "vim::EndOfLine",
      "ctrl-a": "vim::StartOfLine",
    },
  },
]
